## 一个古老游戏的新生――从贪吃蛇到编程入门。

我们这篇文章的贪吃蛇游戏，玩起来是这个样子的。

'配图'

对，就是一个非常正宗的贪吃蛇。

如果你把这篇文章读完，你发现写出贪吃蛇类似的游戏，像2048、扫雷、俄罗斯方块等等，其实很Easy的。

#### 先来看看难度。

这是一个**纯C语言**的代码，
'配图'

而且使用的是大多数计算专业本科的同学们最熟悉的编程环境**Visual Studio**，
'配图'

运行在最常用的Windows系统中。
'配图'

同学说，我们只会写出这样的程序：
'配图'

对于如何写贪吃蛇，完全懵了。

对的，用的C语言，在Visual Studio。

耐心，继续读完。

#### 再来看看工作量。
这个游戏的源代码，一共没有超过**1400行**。
'配部分代码'
而且还是在注释异常丰富的情况下，
'配部分代码'
而且还是包括了一个链表的实现程序。
'配部分代码'
这是为了同学们能把代码看得跟明白，特意做了很多形式上的表现。我们在实际的工程开发中，代码可能写得更简洁一些，有信心在**600行**内完成同样的功能，这通常是一个成熟程序员**不超过一周**的工作量。（实际有人可能一天就写出来超过1000行代码）。


### 如何写？

跟着我的思路来。

| 设计表示游戏状态的数据结构和数据。

贪吃蛇游戏，包括最基本的几个东西。**一条蛇**，**一个食物**以及**边界**。
更完整的描述是：一条蛇，在玩家的控制下改变移动方向，蛇自己爬行，“吃到”食物，会变长，同时不要碰到游戏边界和自己。


经过特别仔细的考虑，需要以下数据来表示：
* 食物的位置
* 蛇爬行的速度（每爬行一步间隔的时间）。
* 蛇的移动方向
* 边界的大小。
* 蛇点的数量每一个点的位置

由于蛇会长的越来越长，而且各个点的位置会不断变化。所以链表是适合表示蛇的数据结构。这是整个程序中最复杂的数据结构了。

有同学说，啊，链表，这是我大学生涯痛苦的经历。
码农界有一句名言，叫不要重复发明轮子。
所以像链表这样基础的东西，不需要自己去造，已经有很多人写过了很好的了。如果你想学习，可以，老师至少能找到5种以上链表的实现代码，已经不可能比他们写得更好了。
示例代码中的链表也不是我自己写的！放在这里完全就是为了完整的演示。

虽然没有画出来，但是实际是有格子中。食物和蛇的每一个节点的位置都是格子中的。蛇一步爬行一个格子。
* 边界大小:X Y.
这些数据中，很多都是**坐标**，所以我们专门设计了一个**结构体**数据类型，来表示坐标类型的数据。
'配代码'

有了这些数据，似乎游戏就表示清楚了。但是我们还希望游戏可以**计分**和**升级**。那么需要
* 分数;
* 级别;
* 升级条件;采用积分每累计到一定的分数，就升级一次的方式。
* 每升级一次，游戏速度的变化。出于简单考虑，我们可以设计这个比例是固定的。

以上这些数据，和界面的显示是无关的。比如有一些数据，我们没有在这里考虑，比如用来显示食物和蛇的圆圈的**颜色**、**大小**等等。因为这些内容*和游戏逻辑无关*，只在显示的时候用到了。

'配代码'

| 编写一些函数来操作这些数据。然后完成游戏逻辑功能的函数编写。

游戏的过程，就是这些数据变化的过程。所以在游戏过程中，程序会不断的去读和写这些数据。
下面就是老师设计的去读写这些数据的操作。

分层的设计思想

封装。

链表的使用并不需要了解链表具体是如何实现的，只需要知道链表可以有什么作用，如何使用。
为了尽量屏蔽掉实现细节，而便于其他人使用，链表的开发人员，需要编写出一系列对链表的操作函数，我们通常会把这种函数称为接口。

| 考虑程序的控制问题，这里可能需要和游戏运行的平台相关了。

| 把游戏显示出来。


我还经历那些？
| 把代码串起来。


| 并不是按照我说的顺序写出来的代码




### 总结，为什么我们学了那么多编程语言，但是我们还是不会写代码。

一个重要原因是，'你放弃了'。

还有一个更重要的原因，是'其实你还没学完'。**知识体系**还不完整。学编程不等于学习程序语言。

而需要包括以下5个方面的学习：
* 编程语言；
* 开发工具；
* 接口和库；
* 运行机理；
* 设计模式；

而这个例子，5个方面都涉及到了。